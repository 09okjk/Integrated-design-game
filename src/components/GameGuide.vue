<script setup lang="ts">
import { ref } from 'vue';

// æ¸¸æˆå¼•å¯¼ç»„ä»¶
// å®šä¹‰å½“å‰æ¿€æ´»çš„æŒ‡å—éƒ¨åˆ†
const activeSection = ref('');

// åˆ‡æ¢æŒ‡å—éƒ¨åˆ†
const toggleSection = (section: string) => {
  if (activeSection.value === section) {
    // å¦‚æœå·²ç»æ¿€æ´»ï¼Œåˆ™å…³é—­
    activeSection.value = '';
  } else {
    // å¦åˆ™æ¿€æ´»è¯¥éƒ¨åˆ†
    activeSection.value = section;
  }
};
</script>

<template>
  <div class="game-guide">
    <h3 class="guide-title">æ¸¸æˆæŒ‡å—</h3>
    
    <!-- æŒ‡å—æŒ‰é’®åŒºåŸŸ -->
    <div class="guide-buttons">
      <button 
        class="guide-button" 
        :class="{ active: activeSection === 'terrain' }" 
        @click="toggleSection('terrain')"
      >
        åœ°å½¢ç±»å‹
      </button>
      
      <button 
        class="guide-button" 
        :class="{ active: activeSection === 'weather' }" 
        @click="toggleSection('weather')"
      >
        å¤©æ°”æ§åˆ¶
      </button>
      
      <button 
        class="guide-button" 
        :class="{ active: activeSection === 'environment' }" 
        @click="toggleSection('environment')"
      >
        ç¯å¢ƒå˜åŒ–
      </button>
      
      <button 
        class="guide-button" 
        :class="{ active: activeSection === 'residents' }" 
        @click="toggleSection('residents')"
      >
        å±…æ°‘ç±»å‹
      </button>
      
      <button 
        class="guide-button" 
        :class="{ active: activeSection === 'tips' }" 
        @click="toggleSection('tips')"
      >
        æ“ä½œæç¤º
      </button>
    </div>
    
    <!-- åœ°å½¢ç±»å‹éƒ¨åˆ† -->
    <div v-if="activeSection === 'terrain'" class="guide-section">
      <h4>åœ°å½¢ç±»å‹</h4>
      <div class="guide-item">
        <div class="guide-icon plain"></div>
        <span>å¹³åŸ: é€‚åˆå†œè€•ï¼Œæ¤è¢«èŒ‚ç››çš„åœ°åŒº</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon water"></div>
        <span>æ°´åŸŸ: æ²³æµã€æ¹–æ³Šæˆ–æµ·æ´‹</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon desert"></div>
        <span>æ²™æ¼ : å¹²æ—±å°‘é›¨ï¼Œå‡ ä¹æ²¡æœ‰æ¤è¢«</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon hill"></div>
        <span>ä¸˜é™µ: èµ·ä¼çš„åœ°å½¢ï¼Œé€‚åˆæ”¾ç‰§</span>
      </div>
    </div>

    <!-- å¤©æ°”æ§åˆ¶éƒ¨åˆ† -->
    <div v-if="activeSection === 'weather'" class="guide-section">
      <h4>å¤©æ°”æ§åˆ¶</h4>
      <div class="guide-item">
        <div class="guide-icon hot"></div>
        <span>ç‚çƒ­: å¢åŠ åŒºåŸŸæ¸©åº¦</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon cold"></div>
        <span>å¯’å†·: é™ä½åŒºåŸŸæ¸©åº¦</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon wet"></div>
        <span>é™é›¨: å¢åŠ åŒºåŸŸæ¹¿åº¦</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon dry"></div>
        <span>å¹²æ—±: é™ä½åŒºåŸŸæ¹¿åº¦</span>
      </div>
      <div class="guide-note">
        <p><strong>æ¶ˆè€—:</strong> æ¯æ¬¡å¤©æ°”æ“ä½œæ¶ˆè€— <span class="highlight">3é‡‘å¸</span></p>
        <p><strong>æ‰©æ•£æ•ˆæœ:</strong> å¤©æ°”å½±å“ä¼šæ‰©æ•£åˆ°ç›¸é‚»å››ä¸ªåœ°å—ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰ï¼Œå¼ºåº¦ä¸ºä¸­å¿ƒåœ°å—çš„50%</p>
        <p><strong>åœ°å½¢å½±å“:</strong> ä¸åŒåœ°å½¢å¯¹æ‰©æ•£æ•ˆæœæœ‰ä¸åŒå½±å“ï¼Œå¦‚æ°´åŸŸå¯¹æ¹¿åº¦æ‰©æ•£æœ‰åŠ æˆ</p>
      </div>
    </div>

    <!-- ç¯å¢ƒå˜åŒ–éƒ¨åˆ† -->
    <div v-if="activeSection === 'environment'" class="guide-section">
      <h4>ç¯å¢ƒå˜åŒ–</h4>
      <div class="guide-item">
        <div class="guide-icon desertification"></div>
        <span>æ²™æ¼ åŒ–: å¹³åŸåœ¨é«˜æ¸©ä½æ¹¿æ—¶è½¬å˜ä¸ºæ²™æ¼ </span>
      </div>
      <div class="guide-item">
        <div class="guide-icon drying-water"></div>
        <span>æ°´åŸŸå¹²æ¶¸: ä½æ¹¿åº¦å¯¼è‡´æ°´åŸŸå˜ä¸ºå¹³åŸ</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon flooding"></div>
        <span>æ´ªæ°´: é«˜æ¹¿åº¦åŠ é™é›¨ä½¿å¹³åŸè½¬å˜ä¸ºæ°´åŸŸ</span>
      </div>
    </div>

    <!-- å±…æ°‘ç±»å‹éƒ¨åˆ† -->
    <div v-if="activeSection === 'residents'" class="guide-section">
      <h4>å±…æ°‘ç±»å‹</h4>
      <div class="guide-item">
        <div class="guide-icon nomad">ğ“€¢</div>
        <span>æ¸¸ç‰§éƒ¨è½: éšå­£èŠ‚è¿å¾™çš„äººç¾¤</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon agriculture">ğ“†“</div>
        <span>å†œè€•éƒ¨è½: ç§æ¤ä½œç‰©çš„å®šå±…ç‚¹</span>
      </div>
      <div class="guide-item">
        <div class="guide-icon fishing">ğ“†›</div>
        <span>æ¸”çŒéƒ¨è½: ä¾é æ•é±¼ä¸ºç”Ÿçš„ç¤¾åŒº</span>
      </div>
    </div>

    <!-- æ“ä½œæç¤ºéƒ¨åˆ† -->
    <div v-if="activeSection === 'tips'" class="guide-section">
      <h4>æ“ä½œæç¤º</h4>
      <p>ç‚¹å‡»åœ°å›¾æ ¼å­å¯è°ƒæ•´è¯¥åŒºåŸŸå¤©æ°”</p>
      <p>æ‚¬åœæ ¼å­å¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</p>
      <p>é•¿æœŸå½±å“å¤©æ°”ä¼šæ”¹å˜åœ°å½¢å’Œå±…æ°‘ç”Ÿæ´»</p>
      <p>ä¿æŒå¹³è¡¡ä»¥ç»´æŒç”Ÿæ€ç³»ç»Ÿç¨³å®š</p>
    </div>
  </div>
</template>

<style scoped>
.game-guide {
  width: 250px;
  height: calc(100vh - 30px);
  max-height: calc(100vh - 30px);
  background: linear-gradient(160deg, rgba(209, 250, 229, 0.9), rgba(186, 230, 253, 0.8)); /* é©¬å¡é¾™è–„ç»¿è“æ¸å˜ */
  border: 2px solid rgba(147, 197, 253, 0.6); /* é©¬å¡é¾™æµ…è“è‰²è¾¹æ¡† */
  border-radius: 12px;
  padding: 15px;
  color: rgba(15, 23, 42, 0.9); /* æ·±è‰²æ–‡å­— */
  font-family: 'Courier New', monospace;
  overflow-y: auto;
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  flex-shrink: 0;
  box-shadow: 0 8px 15px rgba(96, 165, 250, 0.3); /* é©¬å¡é¾™è“è‰²é˜´å½± */
  backdrop-filter: blur(3px);
  display: flex;
  flex-direction: column;
}

/* æŒ‡å—æŒ‰é’®åŒºåŸŸæ ·å¼ */
.guide-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 15px;
}

/* æŒ‡å—æŒ‰é’®æ ·å¼ */
.guide-button {
  padding: 8px 12px;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.7), rgba(226, 232, 240, 0.5));
  border: 1px solid rgba(147, 197, 253, 0.4);
  border-radius: 8px;
  color: rgba(37, 99, 235, 0.8);
  font-family: 'Courier New', monospace;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
  box-shadow: 0 2px 4px rgba(96, 165, 250, 0.2);
}

/* æŒ‡å—æŒ‰é’®æ‚¬åœæ•ˆæœ */
.guide-button:hover {
  background: linear-gradient(145deg, rgba(224, 242, 254, 0.8), rgba(186, 230, 253, 0.6));
  box-shadow: 0 3px 6px rgba(96, 165, 250, 0.3);
  transform: translateY(-1px);
}

/* æŒ‡å—æŒ‰é’®æ¿€æ´»æ•ˆæœ */
.guide-button.active {
  background: linear-gradient(145deg, rgba(186, 230, 253, 0.8), rgba(147, 197, 253, 0.6));
  border-color: rgba(59, 130, 246, 0.6);
  color: rgba(30, 64, 175, 0.9);
  box-shadow: 0 1px 3px rgba(96, 165, 250, 0.4), inset 0 1px 3px rgba(255, 255, 255, 0.4);
  transform: translateY(1px);
}

.guide-title {
  text-align: center;
  font-size: 20px;
  color: rgba(37, 99, 235, 0.9); /* é©¬å¡é¾™è“è‰²æ ‡é¢˜ */
  margin-top: 0;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(147, 197, 253, 0.5); /* é©¬å¡é¾™æµ…è“è‰²åˆ†éš”çº¿ */
  font-weight: 600;
  letter-spacing: 1px;
  text-shadow: 0 1px 3px rgba(96, 165, 250, 0.4); /* è“è‰²å…‰æ™• */
}

.guide-section {
  margin-bottom: 15px;
}

.guide-section h4 {
  color: rgba(74, 222, 128, 0.9); /* é©¬å¡é¾™ç»¿è‰²å‰¯æ ‡é¢˜ */
  font-size: 15px;
  margin: 8px 0;
  border-bottom: 1px dashed rgba(134, 239, 172, 0.5); /* é©¬å¡é¾™æµ…ç»¿è‰²åˆ†éš”çº¿ */
  padding-bottom: 4px;
  font-weight: 500;
  letter-spacing: 0.5px;
}

.guide-item {
  display: flex;
  align-items: center;
  margin: 5px 0;
  font-size: 12px;
}

.guide-note {
  margin-top: 12px;
  padding: 8px 10px;
  background-color: rgba(255, 255, 255, 0.7);
  border-left: 3px solid #3b82f6;
  border-radius: 4px;
  font-size: 0.9em;
}

.guide-note p {
  margin: 5px 0;
  line-height: 1.4;
}

.highlight {
  color: #ef4444;
  font-weight: bold;
}

.guide-icon {
  width: 20px;
  height: 20px;
  margin-right: 10px;
  border: 1px solid #aaa;
}

.guide-icon.plain {
  background-color: rgba(144, 238, 144, 0.6);
  box-shadow: 0 0 5px rgba(144, 238, 144, 0.5);
}

.guide-icon.water {
  background-color: rgba(70, 130, 180, 0.6);
  box-shadow: 0 0 5px rgba(70, 130, 180, 0.5);
}

.guide-icon.desert {
  background-color: rgba(210, 180, 140, 0.6);
  box-shadow: 0 0 5px rgba(210, 180, 140, 0.5);
}

.guide-icon.hill {
  background-color: rgba(139, 69, 19, 0.6);
  box-shadow: 0 0 5px rgba(139, 69, 19, 0.5);
}

.guide-icon.hot {
  background-color: rgba(255, 100, 100, 0.3);
  position: relative;
}

.guide-icon.hot::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    45deg, 
    transparent,
    transparent 3px, 
    rgba(255, 165, 0, 0.3) 3px, 
    rgba(255, 165, 0, 0.3) 6px
  );
}

.guide-icon.cold {
  background-color: rgba(220, 220, 250, 0.4);
  position: relative;
}

.guide-icon.cold::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.5) 1px,
    transparent 1px
  );
  background-size: 5px 5px;
}

.guide-icon.wet {
  background-color: rgba(173, 216, 230, 0.3);
  position: relative;
}

.guide-icon.wet::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 2px;
  height: 6px;
  background-color: rgba(173, 216, 230, 0.7);
  box-shadow: 
    5px 2px 0 rgba(173, 216, 230, 0.7),
    10px 5px 0 rgba(173, 216, 230, 0.7),
    15px 3px 0 rgba(173, 216, 230, 0.7);
}

.guide-icon.dry {
  background-image: 
    linear-gradient(0deg, rgba(210, 180, 140, 0.3) 10%, transparent 30%),
    linear-gradient(90deg, rgba(210, 180, 140, 0.3) 10%, transparent 30%);
  background-size: 10px 10px;
}

.guide-icon.desertification {
  background-color: rgba(144, 238, 144, 0.3);
  position: relative;
}

.guide-icon.desertification::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-conic-gradient(
      rgba(210, 180, 140, 0.5) 0% 25%, 
      rgba(245, 222, 179, 0.3) 0% 50%
    );
  background-size: 8px 8px;
  opacity: 0.7;
}

.guide-icon.drying-water {
  background-color: rgba(70, 130, 180, 0.4);
  position: relative;
}

.guide-icon.drying-water::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    linear-gradient(0deg, rgba(120, 120, 120, 0.4) 1px, transparent 1px),
    linear-gradient(90deg, rgba(120, 120, 120, 0.4) 1px, transparent 1px);
  background-size: 7px 7px;
}

.guide-icon.flooding {
  background-color: rgba(70, 130, 180, 0.5);
  position: relative;
}

.guide-icon.flooding::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 50%;
  border: 2px solid rgba(173, 216, 230, 0.5);
  transform: scale(0.8);
}

.guide-icon.nomad, .guide-icon.agriculture, .guide-icon.fishing {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.5);
  color: #fff;
  font-size: 16px;
}

p {
  margin: 5px 0;
  font-size: 12px;
}
</style>
